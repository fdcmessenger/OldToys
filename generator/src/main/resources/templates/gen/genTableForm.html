<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="en">
    <head>
        <th:block th:include="include :: head('选择数据库表')" />
    </head>   
    <body class="popbody">
        <div id="main">
            <form id="inputForm" th:object="${genTable}" genTable action="#" method="post" class="form-horizontal">
                <form:hidden path="id"/>
                <input type="hidden" id="id" name="id" value="*{id}"/>
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="col-sm-6  control-label">表名:</label>
                            <div class="col-sm-6 ">
                                <input  id="name" name="name" th:value="*{name}"maxlength="200" class="form-control" readonly="true"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="col-sm-6  control-label">说明:</label>
                            <div class="col-sm-6 ">
                                <input  id="comments" name="comments" th:value="*{comments}"maxlength="200" class="form-control"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="col-sm-6  control-label">类名:</label>
                            <div class="col-sm-6 ">
                                <input  id="className" name="className" th:value="*{className}"maxlength="200" class="form-control"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="col-sm-6  control-label">父表表名:</label>
                            <div class="col-sm-6 ">
                                <select id="parentTable" name="parentTable"  class="form-control" >
                                    <option value="">无</option>
                                    <option th:each="table:${tableList}" th:text="${table.nameAndComments}" th:value="${table.name}"></option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="col-sm-6  control-label">当前表外键：</label>
                            <div class="col-sm-6 ">

                                <select id="parentTableFk" name="parentTableFk" class="form-control" >
                                    <option value="">无</option>
                                    <option th:each="column:${genTable.columnList}" th:text="${column.nameAndComments}" th:value="${column.name}"></option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">

                        <p class="help-block"> 如果有父表，请指定父表表名和外键</p>

                    </div>
                </div>

                <div class="row">
                    <div class="col-md-3">
                        <div class="form-actions col-sm-2">
                            <input id="btnSubmit" class="btn btn-primary " type="submit" value="保 存" />&nbsp;
                        </div>
                        <div class="form-actions col-sm-2">
                            <input id="btnCancel" class="btn btn-danger" type="button" value="刷新" onclick="location.reload();;"/>
                        </div>
                        <div class="form-actions col-sm-2">
                            <input id="btnCancel" class="btn btn-warning" type="button" value="关 闭" onclick="GenTableInfo.close();"/>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 row container">
                    <table id="contentTable" class="bootstrap-table table table-striped table-bordered table-condensed">
                        <thead><tr><th title="数据库字段名">列名</th><th title="默认读取数据库字段备注">说明</th><th title="数据库中设置的字段类型及长度">物理类型</th><th title="实体对象的属性字段类型">Java类型</th>
                                <th title="实体对象的属性字段（对象名.属性名|属性名2|属性名3，例如：用户user.id|name|loginName，属性名2和属性名3为Join时关联查询的字段）">Java属性名称 <i class="icon-question-sign"></i></th>
                                <th title="是否是数据库主键">主键</th><th title="字段是否可为空值，不可为空字段自动进行空值验证">可空</th><th title="选中后该字段被加入到insert语句里">插入</th>
                                <th title="选中后该字段被加入到update语句里">编辑</th><th title="选中后该字段被加入到查询列表里">列表</th>
                                <th title="选中后该字段被加入到查询条件里">查询</th><th title="该字段为查询字段时的查询匹配放松">查询匹配方式</th>
                                <th title="字段在表单中显示的类型">显示表单类型</th><th title="显示表单类型设置为“下拉框、复选框、点选框”时，需设置字典的类型">字典类型</th><th>排序</th></tr></thead>
                        <tbody>
                                <tr th:each="column : ${genTable.columnList}">
                                    <td >
                                        <input type="hidden" th:name="'columnList['+${columnStat.index}+'].id'" th:value="${column.id}"/>
                                        <input type="hidden" th:name="'columnList['+${columnStat.index}+'].isDbFieldExists'" th:value="${column.isDbFieldExists}"/>
                                        <input type="hidden" th:name="'columnList['+${columnStat.index}+'].genTable.id'" th:value="${column.genTable.id}"/>
                                        <input type="hidden" th:name="'columnList['+${columnStat.index}+'].name'" th:value="${column.name}"/> 
                                        <span th:text= "${column.name}+ ${column.isDbFieldExists?'':'(deleted)'}"/>
                                    </td>
                                    <td>
                                        <input type="text" th:name="'columnList['+${columnStat.index}+'].comments'" th:value="${column.comments}" maxlength="200" class="required" style="width:100px;"/>
                                    </td>
                                    <td >
                                        <input type="hidden" th:name="'columnList['+${columnStat.index}+'].jdbcType'" th:value="${column.jdbcType}"/>
                                        <span th:text= " ${column.jdbcType}"/>
                                       
                                    </td>
                                    <td>
                                        <select th:name="'columnList['+${columnStat.index}+'].javaType'" class="required input-mini" style="width:85px;*width:75px">
                                           
                                            <option th:each="dict:${config.javaTypeList}" th:selected="(${dict.value}==${column.javaType})?'selected':''}" th:text="${dict.label}" th:value="${dict.value}"></option>
                                        </select>
                                    </td>
                                    <td>
                                        <input type="text" th:name="columnList[${columnStat.index}].javaField" value="${column.javaField}" maxlength="200" class="required input-small"/>
                                    </td>
                                    <td>
                                        <input type="checkbox" th:name="columnList[${columnStat.index}].isPk" th:text="${column.isPk ? 'checked' : ''}"/>
                                    </td>
                                    <td>
                                        <input type="checkbox" th:name="columnList[${columnStat.index}].isNull" th:text="${column.isNull ? 'checked' : ''}"/>
                                    </td>
                                    <td>
                                        <input type="checkbox" th:name="columnList[${columnStat.index}].isInsert" th:text="${column.isInsert ? 'checked' : ''}"/>
                                    </td>
                                    <td>
                                        <input type="checkbox" th:name="columnList[${columnStat.index}].isEdit" th:text="${column.isEdit ? 'checked' : ''}"/>
                                    </td>
                                    <td>
                                        <input type="checkbox" th:name="columnList[${columnStat.index}].isList" th:text="${column.isList ? 'checked' : ''}"/>
                                    </td>
                                    <td>
                                        <input type="checkbox" th:name="columnList[${columnStat.index}].isQuery" th:text="${column.isQuery ? 'checked' : ''}"/>
                                    </td>
                                    <td>
                                        <select th:name="columnList[${columnStat.index}].queryType" class="required input-mini">
                                           
                                            <option th:each="dict:${config.queryTypeList}" th:selected="${dict.value==column.queryType?'selected':''}" th:text="${dict.label}" th:value="${dict.value}"></option>
                                        </select>
                                    </td>
                                    <td>
                                        <select th:name="columnList[${columnStat.index}].showType" class="required" style="width:100px;">
                                            <option th:each="dict:${config.showTypeList}" th:selected="${dict.value==column.showType?'selected':''}" th:text="${dict.label}" th:value="${dict.value}"></option>
                                        </select>
                                    </td>
                                    <td>
                                        <input type="text" th:name="columnList[${columnStat.index}].dictType" value="${column.dictType}" maxlength="200" class="input-mini"/>
                                    </td>
                                    <td>
                                        <input type="text" th:name="columnList[${columnStat.index}].sort" value="${column.sort}" maxlength="200" class="required input-min digits"/>
                                    </td>
                                </tr>
                        </tbody>
                    </table>
                </div>

                </form:form>
        </div>

        <div th:replace="include :: footer"></div>
        <script th:src="@{/static/gen/genTableInfo.js}"></script>
    </body>
</html>